# 節奏與押韻夥伴（R2B）- 測試指南

## 快速開始

### 方法 1：從主頁面進入
1. 在瀏覽器中開啟 `index.html`
2. 點擊選單中的「節奏與押韻夥伴（Rhythm & Rhyme Buddy, R2B）」（第 7 項）

### 方法 2：直接開啟
1. 在瀏覽器中直接開啟 `story-song-weaver.html`

## 測試步驟

### 步驟 1：測試使用者檔案模組

**測試目標：** 驗證使用者資料的儲存與載入

1. **填寫使用者檔案**
   - 在「使用者檔案」區塊中：
     - 輸入幼兒姓名：例如「小明」
     - 填寫學習目標：例如「學習拼音、認識數字 1-10」
     - 輸入特定內容：例如「ㄅㄆㄇ、1-10、洗手步驟」
     - 選擇認知發展階段：選擇「初級」

2. **儲存檔案**
   - 點擊「儲存檔案」按鈕
   - 應該會看到成功提示訊息

3. **驗證儲存**
   - 重新整理頁面（F5 或 Cmd+R）
   - 檢查使用者檔案是否自動載入
   - ✅ 成功：資料應該還在

### 步驟 2：測試故事歌詞編織器

**測試目標：** 驗證個人化歌詞生成功能

1. **生成歌詞**
   - 在「故事歌詞編織器」區塊中：
     - 輸入歌詞主題：例如「動物」
     - 選擇難度等級：選擇「簡單」
     - 點擊「生成歌詞」按鈕

2. **檢查結果**
   - 等待 1-2 秒（模擬 API 延遲）
   - 應該會看到生成的歌詞顯示在下方
   - ✅ 成功：歌詞應該包含主題和特定內容

3. **測試不同難度**
   - 嘗試「中等」和「困難」難度
   - 檢查生成的歌詞是否有差異

4. **測試不同主題**
   - 嘗試「顏色」、「季節」等不同主題
   - 驗證歌詞內容會根據主題變化

### 步驟 3：測試節奏共鳴模組

**測試目標：** 驗證音樂節奏的動態調整功能

1. **調整節奏速度**
   - 在「節奏共鳴」區塊中：
     - 使用滑桿調整節奏速度（60-180 BPM）
     - 觀察右上角的 BPM 數值是否即時更新
     - ✅ 成功：數值應該隨滑桿移動而改變

2. **測試自動調整**
   - 選擇不同的「專注度」等級（低/中/高）
   - 選擇不同的「學習進度」（初學/進階/熟練）
   - 觀察節奏速度是否自動調整
   - ✅ 成功：節奏應該根據選擇自動變化

3. **測試音樂播放**
   - 點擊「播放音樂」按鈕
   - 觀察節奏視覺化區域的動畫
   - 點擊「停止」按鈕
   - ✅ 成功：動畫應該開始和停止

### 步驟 4：測試和聲助手模組

**測試目標：** 驗證語音辨識與發音分析功能

1. **測試錄音功能**
   - 在「和聲助手」區塊中：
     - 點擊「開始錄音」按鈕
     - 瀏覽器會要求麥克風權限
     - ✅ 允許權限：點擊「允許」

2. **錄音測試**
   - 開始說話或唱歌（至少 3-5 秒）
   - 點擊「停止錄音」按鈕
   - ✅ 成功：按鈕狀態應該改變

3. **檢查分析結果**
   - 等待 2 秒（模擬分析時間）
   - 檢查以下項目：
     - 發音準確度：應該顯示 70-100% 的分數
     - 押韻檢測：應該顯示 80-100% 的分數
     - 鼓勵提示：應該顯示相應的鼓勵文字
   - ✅ 成功：所有項目都應該有數值

4. **測試發音指導**
   - 查看「發音指導」區塊
   - 應該顯示根據分數的指導建議
   - ✅ 成功：應該有顏色標示的建議

### 步驟 5：測試即時監測系統

**測試目標：** 驗證學習進度追蹤與動態調整

1. **檢查初始狀態**
   - 查看「即時監測系統」區塊
   - 學習進度應該顯示 0%
   - 專注度應該顯示 50%
   - 表現評分應該顯示「--」

2. **觸發進度更新**
   - 執行以下操作來觸發進度更新：
     - 生成一首歌詞（+5%）
     - 完成一次語音分析（+3%）
     - 播放音樂（+專注度）
   - ✅ 成功：進度條應該會增加

3. **檢查學習路徑**
   - 觀察「學習路徑」區塊
   - 當進度達到 33% 時，第二個步驟應該變為「active」
   - 當進度達到 66% 時，第三個步驟應該變為「active」
   - ✅ 成功：步驟應該根據進度變化

4. **檢查動態調整記錄**
   - 查看「動態調整記錄」區塊
   - 應該看到所有操作的記錄
   - 每條記錄應該有時間戳記
   - ✅ 成功：記錄應該即時更新

### 步驟 6：測試 R2B 互動模組

**測試目標：** 驗證 R2B 的互動功能

1. **測試顏色提示**
   - 點擊「顏色提示」按鈕
   - 觀察 R2B 的表情和燈光
   - 檢查狀態文字是否更新
   - ✅ 成功：R2B 應該顯示顏色相關的互動

2. **測試燈光提示**
   - 點擊「燈光提示」按鈕
   - 觀察燈光的閃爍效果
   - ✅ 成功：燈光應該快速閃爍

3. **測試觸覺回饋**
   - 點擊「觸覺回饋」按鈕
   - 如果使用支援震動的裝置（手機/平板），應該感受到震動
   - ✅ 成功：R2B 應該顯示觸覺相關的互動

4. **檢查自動恢復**
   - 等待 3 秒
   - R2B 應該自動恢復到初始狀態
   - ✅ 成功：表情和狀態應該恢復

## 完整測試流程

### 完整使用情境測試

1. **建立新使用者**
   ```
   姓名：小華
   學習目標：學習拼音和數字
   特定內容：ㄅㄆㄇ、1-10
   認知階段：初級
   ```

2. **生成第一首歌詞**
   - 主題：動物
   - 難度：簡單
   - 檢查歌詞是否包含「ㄅㄆㄇ」或「1-10」

3. **調整節奏並播放**
   - 設定專注度：低
   - 設定學習進度：初學
   - 播放音樂
   - 檢查節奏是否自動降低

4. **進行語音練習**
   - 開始錄音
   - 朗讀生成的歌詞
   - 停止錄音
   - 檢查發音分析結果

5. **查看學習進度**
   - 檢查所有指標是否更新
   - 查看調整記錄

6. **使用 R2B 互動**
   - 測試所有互動按鈕
   - 檢查專注度是否增加

## 瀏覽器相容性測試

### 建議測試的瀏覽器：
- ✅ Chrome/Edge（推薦）
- ✅ Firefox
- ⚠️ Safari（部分功能可能受限）

### 測試重點：
1. **麥克風權限**
   - 確保瀏覽器支援 MediaRecorder API
   - 測試權限請求是否正常

2. **localStorage**
   - 測試資料是否正確儲存
   - 測試跨頁面載入

3. **響應式設計**
   - 調整瀏覽器視窗大小
   - 測試手機/平板模式

## 常見問題與解決方案

### 問題 1：麥克風無法使用
**解決方案：**
- 檢查瀏覽器權限設定
- 確保使用 HTTPS 或 localhost
- 檢查系統麥克風設定

### 問題 2：資料沒有儲存
**解決方案：**
- 檢查瀏覽器是否允許 localStorage
- 清除瀏覽器快取後重試
- 檢查瀏覽器是否為無痕模式（會限制 localStorage）

### 問題 3：樣式顯示異常
**解決方案：**
- 確認 `weaver-styles.css` 檔案存在
- 檢查瀏覽器控制台是否有錯誤
- 清除瀏覽器快取

### 問題 4：動畫不流暢
**解決方案：**
- 檢查瀏覽器效能
- 關閉其他佔用資源的標籤頁
- 使用較新的瀏覽器版本

## 測試檢查清單

### 基本功能
- [ ] 使用者檔案可以儲存和載入
- [ ] 歌詞可以生成
- [ ] 節奏可以調整
- [ ] 音樂可以播放和停止
- [ ] 錄音功能正常
- [ ] 發音分析可以執行
- [ ] 學習進度可以追蹤
- [ ] R2B 互動功能正常

### 進階功能
- [ ] 節奏根據專注度自動調整
- [ ] 學習路徑根據進度更新
- [ ] 動態調整記錄正確顯示
- [ ] 資料跨頁面載入正常

### UI/UX
- [ ] 所有按鈕都有視覺回饋
- [ ] 動畫流暢
- [ ] 響應式設計正常
- [ ] 顏色和樣式一致

## 測試報告範本

```
測試日期：___________
測試人員：___________
瀏覽器：___________

功能測試結果：
□ 使用者檔案模組：通過 / 失敗
□ 故事歌詞編織器：通過 / 失敗
□ 節奏共鳴模組：通過 / 失敗
□ 和聲助手模組：通過 / 失敗
□ 即時監測系統：通過 / 失敗
□ R2B 互動模組：通過 / 失敗

發現的問題：
1. 
2. 
3. 

建議改進：
1. 
2. 
3. 
```

## 下一步

測試完成後，您可以：
1. 根據測試結果進行改進
2. 整合真實的 LLM API（歌詞生成）
3. 整合真實的語音辨識 API（發音分析）
4. 建立後端服務器儲存資料
5. 連接實際的 R2B 硬體裝置

